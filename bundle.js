!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){var t=f.node().offsetWidth;d!==t&&(d=t,s.default.resize())}var i=n(1),a=r(i),u=n(3),c=r(u),l=n(4),s=r(l),f=d3.select("body"),d=0;!function(){f.classed("is-mobile",c.default.any()),window.addEventListener("resize",(0,a.default)(o,150)),s.default.init()}()},function(t,e,n){(function(e){function n(t,e,n){function o(e){var n=v,r=g;return v=g=void 0,j=e,m=t.apply(r,n)}function i(t){return j=t,b=setTimeout(s,e),D?o(t):m}function c(t){var n=t-k,r=t-j,o=e-n;return T?_(o,h-r):o}function l(t){var n=t-k,r=t-j;return void 0===k||n>=e||n<0||T&&r>=h}function s(){var t=x();if(l(t))return f(t);b=setTimeout(s,c(t))}function f(t){return b=void 0,M&&v?o(t):(v=g=void 0,m)}function d(){void 0!==b&&clearTimeout(b),j=0,v=k=g=b=void 0}function p(){return void 0===b?m:f(x())}function y(){var t=x(),n=l(t);if(v=arguments,g=this,k=t,n){if(void 0===b)return i(k);if(T)return b=setTimeout(s,e),o(k)}return void 0===b&&(b=setTimeout(s,e)),m}var v,g,h,m,b,k,j=0,D=!1,T=!1,M=!0;if("function"!=typeof t)throw new TypeError(u);return e=a(e)||0,r(n)&&(D=!!n.leading,T="maxWait"in n,h=T?w(a(n.maxWait)||0,e):h,M="trailing"in n?!!n.trailing:M),y.cancel=d,y.flush=p,y}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){return!!t&&"object"==typeof t}function i(t){return"symbol"==typeof t||o(t)&&b.call(t)==l}function a(t){if("number"==typeof t)return t;if(i(t))return c;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=d.test(t);return n||p.test(t)?y(t.slice(2),n?2:8):f.test(t)?c:+t}var u="Expected a function",c=NaN,l="[object Symbol]",s=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,p=/^0o[0-7]+$/i,y=parseInt,v="object"==typeof e&&e&&e.Object===Object&&e,g="object"==typeof self&&self&&self.Object===Object&&self,h=v||g||Function("return this")(),m=Object.prototype,b=m.toString,w=Math.max,_=Math.min,x=function(){return h.Date.now()};t.exports=n}).call(e,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}};e.default=r},function(t,e,n){"use strict";function r(t){return t.map(function(t){return _({},t,{Metro:t.metro,Day:+t.Day,Hour:+t.Hour,scaled:+t.scaled})})}function o(t){d3.loadData("assets/data/traffic.csv","assets/data/bestWorstTraffic.csv",function(e,n){D={traffic:r(n[0]),bestWorstTraffic:n[1]},t()})}function i(t,e){return"translate("+t+", "+e+")"}function a(){T=D.traffic,M=D.bestWorstTraffic,O=d3.nest().key(function(t){return t.Metro}).sortKeys(d3.ascending).rollup(function(t){return{day:d3.nest().key(function(t){return t.Day}).entries(t)}}).entries(T),A=d3.nest().key(function(t){return t.Metro}).sortKeys(d3.ascending).rollup(function(t){return{when:d3.nest().key(function(t){return t.When}).entries(t)}}).entries(M)}function u(){Q.attr("data-text",function(){return"When to Avoid "+P+" Traffic During the Thanksgiving Holiday"}).attr("href",function(){return"https://twitter.com/intent/tweet?text=When%20"+P+"%20Traffic%20is%20Worse%20Than%20Normal%20During%20the%20Thanksgiving%20Holiday%20pic.twitter.com%2F"+X+"&amp;via=GoogleTrends&amp;url=https://googletrends.github.io/mappingthanksgiving/"}).attr("data-img",function(){return X});Y.select(".metroGraphic__ui").append("div").attr("class","ui__item ui__item--dropdown dropdown__metro"),Y.select(".dayGraphic__ui").append("div").attr("class","ui__item ui__item--dropdown dropdown__day")}function c(){var t=Y.select(".dropdown__metro"),e=t.append("select"),n=Y.select(".dropdown__day"),r=n.append("select");e.selectAll("option").data(O).enter().append("option").attr("value",function(t){return t.key}).property("selected",function(t){return t.key==P}).text(function(t){return t.key}),e.on("change",function(){P=this.value,s(P)}),Y.select("#daytime__checkbox").on("change",function(){s(P)});var o=d3.map(Z,function(t){return t.number});r.data(O).selectAll("option").data(function(t){return t.value.day}).enter().append("option").attr("value",function(t){return+t.key}).property("selected",function(t){return t.key==W}).text(function(t){return o.get(+t.key).day}),r.on("change",function(){W=+this.value,s(W)})}function l(t,e){var n=A.filter(function(t){return t.key===P}),r=n[0].value.when[0].values,o=d3.select("#daytime__checkbox").property("checked");return"b"===e?r.filter(function(t){return 1==o?"TRUE"==t.Daylight:"FALSE"==t.Daylight}):r.filter(function(t){return"w"==t.Rank})}function s(t){var e=(A.filter(function(t){return t.key===P}),O.filter(function(t){return t.key===P})),n=e[0].value.day.filter(function(t){return+t.key===W});E=n;var r=l(0,"b"),o=Y.select("#bestBefore");console.log({test:o});var i=(Y.select("#bestBefore").data(r).text(function(t){return t.Day+" "+t.Hour}),l(0,"w"));Y.select("#worstBefore").data(i).text(function(t){return t.Day+" "+t.Hour}),Y.select("#selectedMetro").text(P);p(),g()}function f(){var t=V.append("g").attr("class","g-plot"),e=t.append("g").attr("class","g-axis");e.append("g").attr("class","axis axis--x");t.append("g").attr("class","g-sparkline"),t.append("g").attr("class","g-labels"),t.append("g").attr("class","g-axisLabels")}function d(){var t=V.append("defs"),e=t.append("linearGradient").attr("id","svgGradient").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");e.append("stop").attr("class","start").attr("offset","0%").attr("stop-color",$).attr("stop-opacity",1),e.append("stop").attr("class","end").attr("offset","100%").attr("stop-color",z).attr("stop-opacity",1)}function p(){B=q.node().offsetWidth,G=window.innerHeight,H=B<600,L=H?10:11,F=8*L,C=2.5*L,N={top:L,left:H?50:100,bottom:2*L,right:H?50:100},R=B,S=F+(N.bottom+N.top)}function y(){var t=R-N.left-N.right;N.top,N.bottom;J.range([F,0]).domain([0,100]),I.range([0,t]).domain([0,23])}function v(){var t=q.selectAll(".g-axis"),e=[0,6,12,18,23],n=d3.axisBottom(I).tickValues(e).tickSize(S-2.5*L).tickFormat(function(t){return{0:"midnight",6:"6 AM",12:"noon",18:"6 PM",23:"11 PM"}[t]});t.select(".axis--x").call(n)}function g(){V.attr("width",R).attr("height",S);var t=V.select(".g-plot");t.attr("transform",i(N.left,N.top)),U.x(function(t){return I(t.Hour)}).y(function(t){return J(t.scaled)});var e=t.select(".g-sparkline"),n=e.selectAll(".sparkline__traffic").data(E),r=n.enter().append("path").attr("class","sparkline__traffic").attr("stroke","url(#svgGradient)");n.exit().remove(),r.merge(n).transition().duration(500).attr("d",function(t){return U(t.values)})}function h(){1==j&&d3.select("body").classed("embedded",!0),d3.selectAll(".embed-link").on("click",function(t){d3.select(this).select("p").text("Paste This Code Into Your Site"),d3.select(this).select("input").style("display","block")})}function m(){p(),y(),v(),g()}function b(){a(),u(),c(),s(P),f(),d(),h(),m()}function w(){o(b)}Object.defineProperty(e,"__esModule",{value:!0});var _=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x=n(5),k=function(t){return t&&t.__esModule?t:{default:t}}(x),j=k.default.get("embed"),D=(k.default.get("chart"),{}),T=null,M=null,O=null,A=null,P="New York",W=2,E=null,H=null,F=null,$="#2F80ED",z="#DDDDDD",B=0,G=0,R=0,S=0,L=12,I=d3.scaleLinear(),J=d3.scaleLinear(),N=null,C=null,U=d3.line(),K=d3.select("body"),Y=K.select("#traffic"),q=Y.select(".graphic__chart"),V=q.select("svg"),Q=Y.select(".graphic__traffic").select(".tweet__button"),X="qCUdkzzPfT",Z=[{number:1,day:"July 3rd"},{number:2,day:"Fourth of July"},{number:3,day:"July 5th"},{number:4,day:"July 6th"}];e.default={init:w,resize:m}},function(t,e,n){"use strict";function r(t){var e=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(window.location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}function o(t,e){var n=[window.location.protocol,"//",window.location.host,window.location.pathname].join(""),r=document.location.search,o=t+"="+e,i="?"+o;if(r){var a=new RegExp("([?&])"+t+"[^&]*"),u=new RegExp("([?&])"+t+"=[^&;]+[&;]?");void 0===e||null===e||""===e?(i=r.replace(u,"$1"),i=i.replace(/[&;]$/,"")):i=null!==r.match(a)?r.replace(a,"$1"+o):r+"&"+o}i="?"===i?"":i,window.history.replaceState({},"",""+n+i)}Object.defineProperty(e,"__esModule",{value:!0}),e.default={get:r,set:o}}]);